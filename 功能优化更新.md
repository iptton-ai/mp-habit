# ðŸŒŸ åŠŸèƒ½ä¼˜åŒ–æ›´æ–°

## âœ… å·²å®Œæˆçš„ä¼˜åŒ–

### 1. ðŸ”„ ä¹ æƒ¯å’Œå¥–åŠ±å…è®¸å¤šæ¬¡å®Œæˆ/å…‘æ¢

#### ðŸ“ é—®é¢˜æè¿°
ä¹‹å‰çš„é€»è¾‘ä¸­ï¼Œä¹ æƒ¯å®Œæˆä¸€æ¬¡åŽå°±ä¸ä¼šå†æ˜¾ç¤ºåœ¨é¦–é¡µï¼Œå¥–åŠ±ä¹Ÿæ˜¯å¦‚æ­¤ã€‚è¿™ä¸ç¬¦åˆå®žé™…ä½¿ç”¨åœºæ™¯ï¼Œå› ä¸ºï¼š
- ä¹ æƒ¯åº”è¯¥å¯ä»¥æ¯å¤©å¤šæ¬¡å®Œæˆï¼ˆå¦‚åˆ·ç‰™ã€å–æ°´ç­‰ï¼‰
- å¥–åŠ±åº”è¯¥å¯ä»¥å¤šæ¬¡å…‘æ¢ï¼ˆå¦‚çœ‹åŠ¨ç”»ç‰‡ã€åƒé›¶é£Ÿç­‰ï¼‰

#### ðŸ”§ è§£å†³æ–¹æ¡ˆ
**ä¿®æ”¹æ–‡ä»¶**: `pages/index/index.js`

**ä¿®æ”¹å‰**:
```javascript
// èŽ·å–ä»Šå¤©å¯ä»¥å®Œæˆçš„ä¹ æƒ¯ï¼ˆæŽ’é™¤å·²å®Œæˆçš„ï¼‰
const completedHabitIds = todayRecords
  .filter(r => r.type === 'habit')
  .map(r => r.itemId)

const todayHabits = habits.filter(h => !completedHabitIds.includes(h.id))
```

**ä¿®æ”¹åŽ**:
```javascript
// èŽ·å–æ‰€æœ‰ä¹ æƒ¯ï¼ˆå…è®¸å¤šæ¬¡å®Œæˆï¼‰
const todayHabits = habits

// èŽ·å–å¯ä»¥å…‘æ¢çš„å¥–åŠ±ï¼ˆå…è®¸å¤šæ¬¡å…‘æ¢ï¼‰
const todayRewards = rewards.filter(r => r.points <= totalPoints)
```

#### ðŸŽ¯ æ•ˆæžœ
- âœ… ä¹ æƒ¯å¯ä»¥æ— é™æ¬¡å®Œæˆï¼Œæ¯æ¬¡éƒ½èŽ·å¾—ç§¯åˆ†
- âœ… å¥–åŠ±å¯ä»¥å¤šæ¬¡å…‘æ¢ï¼Œåªè¦ç§¯åˆ†è¶³å¤Ÿ
- âœ… æ›´ç¬¦åˆå®žé™…ä½¿ç”¨åœºæ™¯
- âœ… æé«˜ç”¨æˆ·ç§¯æžæ€§

### 2. ðŸ“ æ¨¡æ¿ä½¿ç”¨è·³è½¬åˆ°ç¼–è¾‘é¡µé¢

#### ðŸ“ é—®é¢˜æè¿°
ä¹‹å‰ä½¿ç”¨æ¨¡æ¿æ—¶ï¼Œç›´æŽ¥æ·»åŠ åˆ°åˆ—è¡¨ä¸­ï¼Œç”¨æˆ·æ— æ³•ä¿®æ”¹æ¨¡æ¿å†…å®¹ã€‚è¿™æ ·ä¸å¤Ÿçµæ´»ï¼Œç”¨æˆ·å¯èƒ½æƒ³è¦ï¼š
- ä¿®æ”¹ä¹ æƒ¯åç§°ï¼ˆå¦‚"æ—©èµ·èµ·åºŠ"æ”¹ä¸º"7ç‚¹èµ·åºŠ"ï¼‰
- è°ƒæ•´ç§¯åˆ†æ•°é‡
- æŸ¥çœ‹å’Œç¡®è®¤æ‰€æœ‰è®¾ç½®

#### ðŸ”§ è§£å†³æ–¹æ¡ˆ

**ä¿®æ”¹æ–‡ä»¶**: 
- `pages/habits/habits.js`
- `pages/habit-detail/habit-detail.js`
- `pages/rewards/rewards.js`
- `pages/reward-detail/reward-detail.js`

**ä¹ æƒ¯æ¨¡æ¿ä½¿ç”¨æµç¨‹**:
1. ç”¨æˆ·ç‚¹å‡»æ¨¡æ¿ â†’ è·³è½¬åˆ°ä¹ æƒ¯ç¼–è¾‘é¡µé¢
2. è¡¨å•é¢„å¡«æ¨¡æ¿æ•°æ®
3. ç”¨æˆ·å¯ä»¥ä¿®æ”¹ä»»ä½•å†…å®¹
4. ç‚¹å‡»ä¿å­˜å®Œæˆæ·»åŠ 

**å¥–åŠ±æ¨¡æ¿ä½¿ç”¨æµç¨‹**:
1. ç”¨æˆ·ç‚¹å‡»æ¨¡æ¿ â†’ è·³è½¬åˆ°å¥–åŠ±ç¼–è¾‘é¡µé¢
2. è¡¨å•é¢„å¡«æ¨¡æ¿æ•°æ®
3. ç”¨æˆ·å¯ä»¥ä¿®æ”¹ä»»ä½•å†…å®¹
4. ç‚¹å‡»ä¿å­˜å®Œæˆæ·»åŠ 

#### ðŸŽ¯ å®žçŽ°ç»†èŠ‚

**1. æ¨¡æ¿æ•°æ®ä¼ é€’**:
```javascript
// ä¹ æƒ¯é¡µé¢
useTemplate(e) {
  const { template } = e.currentTarget.dataset
  
  const templateData = encodeURIComponent(JSON.stringify({
    name: template.name,
    points: Math.abs(template.points),
    type: template.type
  }))
  
  wx.navigateTo({
    url: `/pages/habit-detail/habit-detail?mode=add&template=${templateData}`
  })
}
```

**2. è¯¦æƒ…é¡µé¢æŽ¥æ”¶æ¨¡æ¿**:
```javascript
// ä¹ æƒ¯è¯¦æƒ…é¡µé¢
onLoad(options) {
  const { mode, id, template } = options
  
  if (mode === 'add' && template) {
    this.loadTemplateData(template)
  }
}

loadTemplateData(templateStr) {
  try {
    const template = JSON.parse(decodeURIComponent(templateStr))
    this.setData({
      formData: {
        name: template.name,
        points: template.points,
        type: template.type
      }
    })
  } catch (error) {
    console.error('æ¨¡æ¿æ•°æ®è§£æžå¤±è´¥:', error)
  }
}
```

#### ðŸŽ¯ æ•ˆæžœ
- âœ… ç”¨æˆ·å¯ä»¥åŸºäºŽæ¨¡æ¿è¿›è¡Œä¸ªæ€§åŒ–ä¿®æ”¹
- âœ… æä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ
- âœ… é¿å…è¯¯æ“ä½œç›´æŽ¥æ·»åŠ 
- âœ… è®©ç”¨æˆ·äº†è§£æ‰€æœ‰è®¾ç½®é€‰é¡¹

## ðŸŒˆ ç”¨æˆ·ä½“éªŒæ”¹è¿›

### ðŸ“± é¦–é¡µä½“éªŒ
- **ä¹ æƒ¯åˆ—è¡¨**: å§‹ç»ˆæ˜¾ç¤ºæ‰€æœ‰ä¹ æƒ¯ï¼Œé¼“åŠ±å¤šæ¬¡å®Œæˆ
- **å¥–åŠ±åˆ—è¡¨**: æ˜¾ç¤ºæ‰€æœ‰å¯å…‘æ¢å¥–åŠ±ï¼Œæ”¯æŒå¤šæ¬¡å…‘æ¢
- **ç©ºçŠ¶æ€æç¤º**: æ›´å‹å¥½çš„æç¤ºæ–‡æ¡ˆ

### ðŸŽ¨ æ¨¡æ¿ä½¿ç”¨ä½“éªŒ
- **ä¸€é”®é¢„å¡«**: ç‚¹å‡»æ¨¡æ¿è‡ªåŠ¨è·³è½¬å¹¶é¢„å¡«æ•°æ®
- **çµæ´»ç¼–è¾‘**: å¯ä»¥ä¿®æ”¹æ¨¡æ¿çš„ä»»ä½•å†…å®¹
- **ç¡®è®¤ä¿å­˜**: ç”¨æˆ·ä¸»åŠ¨ç¡®è®¤åŽæ‰æ·»åŠ 

### ðŸ’– ç§¯åˆ†ç³»ç»Ÿä½“éªŒ
- **å¤šæ¬¡å¥–åŠ±**: å¥½ä¹ æƒ¯åšå¾—è¶Šå¤šï¼Œç§¯åˆ†è¶Šå¤š
- **çµæ´»æ¶ˆè´¹**: ç§¯åˆ†è¶³å¤Ÿå°±å¯ä»¥å¤šæ¬¡å…‘æ¢å¥–åŠ±
- **æ­£å‘æ¿€åŠ±**: é¼“åŠ±æŒç»­çš„å¥½è¡Œä¸º

## ðŸŽ¯ ä½¿ç”¨åœºæ™¯ç¤ºä¾‹

### ðŸŒ… ä¹ æƒ¯å¤šæ¬¡å®Œæˆåœºæ™¯
**åœºæ™¯**: å°æœ‹å‹ä¸€å¤©åˆ·äº†3æ¬¡ç‰™
1. æ—©ä¸Šåˆ·ç‰™ â†’ èŽ·å¾—3ç§¯åˆ†
2. ä¸­åˆåˆ·ç‰™ â†’ å†èŽ·å¾—3ç§¯åˆ†  
3. æ™šä¸Šåˆ·ç‰™ â†’ å†èŽ·å¾—3ç§¯åˆ†
4. **æ€»è®¡**: 9ç§¯åˆ†ï¼Œé¼“åŠ±è‰¯å¥½å«ç”Ÿä¹ æƒ¯

### ðŸŽ å¥–åŠ±å¤šæ¬¡å…‘æ¢åœºæ™¯
**åœºæ™¯**: å°æœ‹å‹æƒ³å¤šçœ‹å‡ æ¬¡åŠ¨ç”»ç‰‡
1. ç¬¬ä¸€æ¬¡å…‘æ¢"çœ‹åŠ¨ç”»ç‰‡30åˆ†é’Ÿ" â†’ æ¶ˆè€—15ç§¯åˆ†
2. ç§¯åˆ†è¶³å¤Ÿæ—¶å¯ä»¥å†æ¬¡å…‘æ¢ â†’ å†æ¶ˆè€—15ç§¯åˆ†
3. **æ•ˆæžœ**: ç§¯åˆ†è¶Šå¤šï¼Œäº«å—è¶Šå¤šï¼Œæ¿€åŠ±æŒç»­åŠªåŠ›

### ðŸ“ æ¨¡æ¿ä¸ªæ€§åŒ–åœºæ™¯
**åœºæ™¯**: ä½¿ç”¨"æ—©èµ·èµ·åºŠ"æ¨¡æ¿
1. ç‚¹å‡»æ¨¡æ¿ â†’ è·³è½¬åˆ°ç¼–è¾‘é¡µé¢
2. ä¿®æ”¹åç§°ä¸º"7ç‚¹å‰èµ·åºŠ"
3. è°ƒæ•´ç§¯åˆ†ä¸º8åˆ†ï¼ˆå› ä¸ºæ¯”è¾ƒå›°éš¾ï¼‰
4. ä¿å­˜ â†’ æ·»åŠ ä¸ªæ€§åŒ–ä¹ æƒ¯

## ðŸš€ æŠ€æœ¯å®žçŽ°äº®ç‚¹

### ðŸ”— URLå‚æ•°ä¼ é€’
- ä½¿ç”¨ `encodeURIComponent` å®‰å…¨ä¼ é€’JSONæ•°æ®
- æ”¯æŒå¤æ‚å¯¹è±¡çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–
- é¿å…URLç‰¹æ®Šå­—ç¬¦é—®é¢˜

### ðŸŽ¯ é¡µé¢çŠ¶æ€ç®¡ç†
- ç»Ÿä¸€çš„ `mode` å‚æ•°æŽ§åˆ¶é¡µé¢è¡Œä¸º
- çµæ´»çš„æ•°æ®é¢„å¡«æœºåˆ¶
- è‰¯å¥½çš„é”™è¯¯å¤„ç†

### ðŸ’¾ æ•°æ®ä¸€è‡´æ€§
- ä¿æŒåŽŸæœ‰çš„æ•°æ®ç»“æž„
- å‘åŽå…¼å®¹çŽ°æœ‰åŠŸèƒ½
- ä¸å½±å“å·²æœ‰çš„è®°å½•å’Œç»Ÿè®¡

## ðŸŽ‰ æ›´æ–°æ€»ç»“

è¿™æ¬¡ä¼˜åŒ–è®©ä¹ æƒ¯å°åŠ©æ‰‹å˜å¾—æ›´åŠ å®žç”¨å’Œçµæ´»ï¼š

1. **ðŸ”„ å¤šæ¬¡å®Œæˆ** - æ›´ç¬¦åˆçœŸå®žä½¿ç”¨åœºæ™¯
2. **ðŸ“ æ¨¡æ¿ç¼–è¾‘** - æä¾›ä¸ªæ€§åŒ–å®šåˆ¶èƒ½åŠ›
3. **ðŸ’– ç”¨æˆ·ä½“éªŒ** - æ›´å‹å¥½çš„äº¤äº’æµç¨‹
4. **ðŸŽ¯ ç§¯åˆ†æ¿€åŠ±** - æ›´æœ‰æ•ˆçš„æ¿€åŠ±æœºåˆ¶

å°æœ‹å‹çŽ°åœ¨å¯ä»¥ï¼š
- ä¸€å¤©å¤šæ¬¡å®ŒæˆåŒä¸€ä¸ªå¥½ä¹ æƒ¯å¹¶èŽ·å¾—å¥–åŠ±
- ç”¨ç§¯åˆ†å¤šæ¬¡å…‘æ¢å–œæ¬¢çš„å¥–åŠ±
- åŸºäºŽæ¨¡æ¿åˆ›å»ºä¸ªæ€§åŒ–çš„ä¹ æƒ¯å’Œå¥–åŠ±
- äº«å—æ›´æµç•…çš„ä½¿ç”¨ä½“éªŒ

è®©å…»æˆå¥½ä¹ æƒ¯å˜å¾—æ›´æœ‰è¶£ã€æ›´çµæ´»ï¼ðŸŒ¸ðŸ’–âœ¨
