<!--pages/index/index.wxml-->
<view class="page" style="background: {{currentTheme.background || 'linear-gradient(135deg, #FFE4E6 0%, #FFF0F5 50%, #E8F5E8 100%)'}}">
  <!-- é—®å€™è¯­ -->
  <view class="card greeting-card" style="background: {{currentTheme.cardBg || 'linear-gradient(145deg, #FFFFFF 0%, #FFF8FA 100%)'}}; border: 2rpx solid {{currentTheme.cardBorder || 'rgba(255, 182, 193, 0.3)'}};">
    <view class="greeting-icon">{{currentTheme.emoji || 'ğŸŒ¸'}}</view>
    <view class="greeting" style="color: {{currentTheme.primary || '#FF69B4'}}; text-shadow: 0 2rpx 4rpx {{currentTheme.primary || '#FF69B4'}}33;">{{greeting}}</view>
    <view class="greeting-decoration">
      <text class="sparkle">âœ¨</text>
      <text class="sparkle">ğŸ’–</text>
      <text class="sparkle">âœ¨</text>
    </view>
  </view>

  <!-- ç§¯åˆ†æ˜¾ç¤º -->
  <view class="points-display" style="background: linear-gradient(135deg, {{currentTheme.primary || '#FF69B4'}} 0%, {{currentTheme.primaryDark || '#FF1493'}} 50%, {{currentTheme.primaryLight || '#FFB6C1'}} 100%)">
    <view class="points-icon">{{currentTheme.emoji || 'ğŸŒŸ'}}</view>
    <view class="points-number">{{totalPoints}}</view>
    <view class="points-label">âœ¨ æˆ‘çš„å°æ˜Ÿæ˜Ÿ âœ¨</view>
  </view>

  <!-- ä»Šæ—¥ä¹ æƒ¯ -->
  <view class="card" style="background: {{currentTheme.cardBg || 'linear-gradient(145deg, #FFFFFF 0%, #FFF8FA 100%)'}}; border: 2rpx solid {{currentTheme.cardBorder || 'rgba(255, 182, 193, 0.3)'}};">
    <view class="section-header flex-between">
      <view class="section-title" style="color: {{currentTheme.primary || '#FF69B4'}}; text-shadow: 0 1rpx 2rpx {{currentTheme.primary || '#FF69B4'}}33;">â­ ä»Šæ—¥ä¹ æƒ¯</view>
      <view class="section-more" style="color: {{currentTheme.primary || '#FF69B4'}};" bindtap="goToHabits">æŸ¥çœ‹å…¨éƒ¨ ğŸ’•</view>
    </view>
    
    <view wx:if="{{todayHabits.length > 0}}">
      <view class="habit-item" wx:for="{{todayHabits}}" wx:key="id">
        <view class="habit-info">
          <view class="habit-name">{{item.name}}</view>
          <view class="habit-points" style="color: {{currentTheme.primary || '#4CAF50'}}; font-weight: bold;">+{{item.points}}ç§¯åˆ†</view>
        </view>
        <button class="btn-complete" style="background: linear-gradient(135deg, {{currentTheme.primary || '#FF69B4'}} 0%, {{currentTheme.primaryDark || '#FF1493'}} 100%); box-shadow: 0 4rpx 12rpx {{currentTheme.primary || '#FF69B4'}}4D;" bindtap="completeHabit" data-habit="{{item}}">âœ… å®Œæˆ</button>
      </view>
    </view>
    
    <view wx:else class="empty-hint">
      <text>è¿˜æ²¡æœ‰æ·»åŠ ä¹ æƒ¯å“¦ï¼å¿«å»æ·»åŠ å§ï¼âœ¨</text>
    </view>
  </view>

  <!-- å¯å…‘æ¢å¥–åŠ± -->
  <view class="card" style="background: {{currentTheme.cardBg || 'linear-gradient(145deg, #FFFFFF 0%, #FFF8FA 100%)'}}; border: 2rpx solid {{currentTheme.cardBorder || 'rgba(255, 182, 193, 0.3)'}};">
    <view class="section-header flex-between">
      <view class="section-title" style="color: {{currentTheme.primary || '#FF69B4'}}; text-shadow: 0 1rpx 2rpx {{currentTheme.primary || '#FF69B4'}}33;">ğŸ å¯å…‘æ¢å¥–åŠ±</view>
      <view class="section-more" style="color: {{currentTheme.primary || '#FF69B4'}};" bindtap="goToRewards">æŸ¥çœ‹å…¨éƒ¨ ğŸŒŸ</view>
    </view>
    
    <view wx:if="{{todayRewards.length > 0}}">
      <view class="reward-item" wx:for="{{todayRewards}}" wx:key="id">
        <view class="reward-info">
          <view class="reward-name">{{item.name}}</view>
          <view class="reward-points" style="color: {{currentTheme.primaryDark || '#ff9800'}}; font-weight: bold;">éœ€è¦{{item.points}}ç§¯åˆ†</view>
        </view>
        <button class="btn-redeem" style="background: linear-gradient(135deg, {{currentTheme.primaryLight || '#FFB6C1'}} 0%, {{currentTheme.primary || '#FF69B4'}} 100%); box-shadow: 0 4rpx 12rpx {{currentTheme.primary || '#FF69B4'}}4D;" bindtap="redeemReward" data-reward="{{item}}">å…‘æ¢</button>
      </view>
    </view>
    
    <view wx:else class="empty-hint">
      <text>æš‚æ—¶æ²¡æœ‰å¯å…‘æ¢çš„å¥–åŠ±</text>
    </view>
  </view>

  <!-- ä»Šæ—¥è®°å½• -->
  <view class="card" style="background: {{currentTheme.cardBg || 'linear-gradient(145deg, #FFFFFF 0%, #FFF8FA 100%)'}}; border: 2rpx solid {{currentTheme.cardBorder || 'rgba(255, 182, 193, 0.3)'}};">
    <view class="section-header flex-between">
      <view class="section-title" style="color: {{currentTheme.primary || '#FF69B4'}}; text-shadow: 0 1rpx 2rpx {{currentTheme.primary || '#FF69B4'}}33;">ğŸ“ ä»Šæ—¥è®°å½•</view>
      <view class="section-more" style="color: {{currentTheme.primary || '#FF69B4'}};" bindtap="goToRecords">æŸ¥çœ‹å…¨éƒ¨ ğŸ“‹</view>
    </view>
    
    <view wx:if="{{todayRecords.length > 0}}">
      <view class="record-item" wx:for="{{todayRecords}}" wx:key="id">
        <view class="record-info">
          <view class="record-name">{{item.itemName}}</view>
          <view class="record-points" style="color: {{item.type === 'habit' ? (currentTheme.primary || '#4CAF50') : (currentTheme.primaryDark || '#ff9800')}}; font-weight: bold;">
            {{item.type === 'habit' ? '+' : '-'}}{{item.points}}ç§¯åˆ†
          </view>
        </view>
        <button class="btn-cancel" bindtap="cancelRecord" data-record="{{item}}">å–æ¶ˆ</button>
      </view>
    </view>
    
    <view wx:else class="empty-hint">
      <text>ä»Šå¤©è¿˜æ²¡æœ‰è®°å½•</text>
    </view>
  </view>
</view>
