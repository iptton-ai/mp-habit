<!--pages/habits/habits.wxml-->
<view class="page" style="background: {{currentTheme.background || 'linear-gradient(135deg, #FFE4E6 0%, #FFF0F5 50%, #E8F5E8 100%)'}}">
  <!-- æ“ä½œæŒ‰é’® -->
  <view class="action-buttons">
    <button class="btn-primary" style="background: linear-gradient(135deg, {{currentTheme.primary || '#FF69B4'}} 0%, {{currentTheme.primaryDark || '#FF1493'}} 100%)" bindtap="addHabit">æ·»åŠ æ–°ä¹ æƒ¯</button>
    <button class="btn-secondary ml-20" style="background: {{currentTheme.secondary || '#FFF0F5'}}; color: {{currentTheme.primary || '#FF69B4'}}; border-color: {{currentTheme.primaryLight || '#FFB6C1'}}" bindtap="toggleTemplates">
      {{showTemplates ? 'éšè—æ¨¡æ¿' : 'ä½¿ç”¨æ¨¡æ¿'}}
    </button>
  </view>

  <!-- æ¨¡æ¿åˆ—è¡¨ -->
  <view wx:if="{{showTemplates}}" class="card">
    <view class="section-title mb-20">ä¹ æƒ¯æ¨¡æ¿</view>
    <view class="template-grid">
      <view class="template-item" wx:for="{{templates}}" wx:key="name" bindtap="useTemplate" data-template="{{item}}">
        <view class="template-name">{{item.name}}</view>
        <view class="template-points {{item.type === 'positive' ? 'text-primary' : 'text-danger'}}">
          {{item.type === 'positive' ? '+' : ''}}{{item.points}}ç§¯åˆ†
        </view>
      </view>
    </view>
  </view>

  <!-- ä¹ æƒ¯åˆ—è¡¨ -->
  <view class="card">
    <view class="section-title mb-20">æˆ‘çš„ä¹ æƒ¯ ({{habits.length}})</view>
    
    <view wx:if="{{habits.length > 0}}">
      <view class="habit-card" wx:for="{{habits}}" wx:key="id">
        <view class="habit-header">
          <view class="habit-name">{{item.name}}</view>
          <view class="habit-points {{item.points > 0 ? 'text-primary' : 'text-danger'}}">
            {{item.points > 0 ? '+' : ''}}{{item.points}}ç§¯åˆ†
          </view>
        </view>
        
        <view class="habit-actions">
          <button class="btn-action btn-complete" style="background: linear-gradient(135deg, {{currentTheme.primary || '#FF69B4'}} 0%, {{currentTheme.primaryDark || '#FF1493'}} 100%)" bindtap="completeHabit" data-habit="{{item}}">
            å®Œæˆ
          </button>
          <button class="btn-action btn-edit" style="background: {{currentTheme.secondary || '#FFF0F5'}}; color: {{currentTheme.primary || '#FF69B4'}}; border-color: {{currentTheme.primaryLight || '#FFB6C1'}}" bindtap="editHabit" data-habit="{{item}}">
            ç¼–è¾‘
          </button>
          <button class="btn-action btn-delete" bindtap="deleteHabit" data-habit="{{item}}">
            åˆ é™¤
          </button>
        </view>
      </view>
    </view>
    
    <view wx:else class="empty-state">
      <view class="empty-icon">ğŸ“</view>
      <view class="empty-text">è¿˜æ²¡æœ‰æ·»åŠ ä»»ä½•ä¹ æƒ¯</view>
      <button class="btn-primary" style="background: linear-gradient(135deg, {{currentTheme.primary || '#FF69B4'}} 0%, {{currentTheme.primaryDark || '#FF1493'}} 100%)" bindtap="addHabit">æ·»åŠ ç¬¬ä¸€ä¸ªä¹ æƒ¯</button>
    </view>
  </view>
</view>
